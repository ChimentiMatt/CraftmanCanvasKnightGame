var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(){CMEncoded=function(){void 0===Object.assign&&(Object.assign=function(a,b){if(!b)return a;for(var c in b)a[c]=b[c];return a}),this.processAppConfig()},CMEncoded.prototype={deepCopy:function(a){var b,c,d;b=Array.isArray(a)?[]:{};for(d in a)c=a[d],b[d]="object"===(void 0===c?"undefined":_typeof(c))?this.deepCopy(c):c;return b},processAppConfig:function(){if(this.waitingArr=[],this.addPluginPlaceholders(),new CMP.App,this.counter=0,this.decreaseCounter=function(){if(0==--this.counter){var a=document.getElementById("loading");a&&document.body.removeChild(a),this.launchApp()}}.bind(this),AppConfig.CUSTOMIZABLE){for(var a=0;a<AppConfig.CUSTOMIZABLE.length;a++){AppConfig.CUSTOMIZABLE[a]["src"]="assets/images/customizable/"+AppConfig.CUSTOMIZABLE[a].src}AppConfig.Image=AppConfig.Image.concat(AppConfig.CUSTOMIZABLE)}if(AppConfig.CUSTOMIZABLE_VID){for(var b=0;b<AppConfig.CUSTOMIZABLE_VID.length;b++){AppConfig.CUSTOMIZABLE_VID[b].vid=AppConfig.CUSTOMIZABLE_VID[b]["src"]="assets/videos/customizable/"+AppConfig.CUSTOMIZABLE_VID[b].src}AppConfig.Video=AppConfig.Video.concat(AppConfig.CUSTOMIZABLE_VID)}if(AppConfig.CUSTOMIZABLE_AUDIO){for(var c=0;c<AppConfig.CUSTOMIZABLE_AUDIO.length;c++)AppConfig.CUSTOMIZABLE_AUDIO[c].ogg&&(AppConfig.CUSTOMIZABLE_AUDIO[c].ogg="assets/audio/customizable/"+AppConfig.CUSTOMIZABLE_AUDIO[c].ogg),AppConfig.CUSTOMIZABLE_AUDIO[c].mp3="assets/audio/customizable/"+AppConfig.CUSTOMIZABLE_AUDIO[c].mp3;AppConfig.Audio=AppConfig.Audio.concat(this.deepCopy(AppConfig.CUSTOMIZABLE_AUDIO))}if(AppConfig.CUSTOMIZABLE_FONT){for(var d=0;d<AppConfig.CUSTOMIZABLE_FONT.length;d++){AppConfig.CUSTOMIZABLE_FONT[d]["src"]="assets/fonts/customizable/"+AppConfig.CUSTOMIZABLE_FONT[d].src}AppConfig.Font=AppConfig.Font.concat(AppConfig.CUSTOMIZABLE_FONT)}if("undefined"!=typeof CUST_ASSETS&&Object.keys(CUST_ASSETS).length>0)for(var e=0;e<Object.keys(CUST_ASSETS).length;e++){var f=Object.keys(CUST_ASSETS)[e],g=ASSETS_64[CUST_ASSETS[f]],h=g.split(":")[1].split("/")[0];"image"===h?(ASSETS[f]=ASSETS_64[CUST_ASSETS[f]],AppConfig.Image.push({id:f,src:f,count:1})):"video"===h?AppConfig.Video.push({id:f,src:ASSETS_64[CUST_ASSETS[f]],count:1}):"audio"===h?AppConfig.Audio.push({id:f,mp3:ASSETS_64[CUST_ASSETS[f]],count:1}):AppConfig.Font.push({id:f,src:ASSETS_64[CUST_ASSETS[f]],count:1})}for(var i=0;i<AppConfig.Image.length;i++){this.counter++;var j=JSON.parse(JSON.stringify(AppConfig.Image[i]));this.waitingArr.push(this.loadImage.bind(this,j,this.decreaseCounter.bind(this,i)))}if(AppConfig&&AppConfig.Audio&&AppConfig.Audio.length>0)for(i=0;i<AppConfig.Audio.length;i++){if(!AppConfig.DISABLE_AUDIO&&"undefined"!=typeof AUDIO_SRCS){var k=AppConfig.Audio[i];for(var l in k)k.hasOwnProperty(l)&&"id"!=l&&AUDIO_SRCS[k[l]]&&(k[l]=AUDIO_SRCS[k[l]])}this.counter++;var m=JSON.parse(JSON.stringify(AppConfig.Audio[i]));this.waitingArr.push(this.loadAudio.bind(this,m,this.decreaseCounter.bind(this,i)))}if(AppConfig&&AppConfig.Video&&AppConfig.Video.length>0)for(i=0;i<AppConfig.Video.length;i++){if("undefined"!=typeof VIDEO_SRCS){var n=AppConfig.Video[i];for(var l in n)n.hasOwnProperty(l)&&"id"!=l&&"count"!=l&&"vid"!=l&&VIDEO_SRCS[n[l]]&&(n[l]=VIDEO_SRCS[n[l]])}this.counter++;var o=JSON.parse(JSON.stringify(AppConfig.Video[i]));this.waitingArr.push(this.loadVideo.bind(this,o,this.decreaseCounter.bind(this,i)))}if(AppConfig&&AppConfig.Font&&AppConfig.Font.length>0)for(i=0;i<AppConfig.Font.length;i++){this.counter++;var p=JSON.parse(JSON.stringify(AppConfig.Font[i]));this.waitingArr.push(this.loadFont.bind(this,p,this.decreaseCounter.bind(this,i)))}0==this.counter?this.launchApp():CMP.Partner.dapiViewable&&AppConfig.LINEAR_LOAD?window.requestAnimationFrame(this.onDraw.bind(this,!0)):this.onDraw(!1)},onDraw:function(a){if(this.waitingArr.length>0){var b=this.waitingArr.shift();"undefined"!=typeof changeText&&changeText(this.waitingArr.length),b(),a?window.requestAnimationFrame(this.onDraw.bind(this,!0)):this.onDraw(!1)}},addPluginPlaceholders:function(){var a=function(){return{progress:function(){}}};void 0===CMP.Heat&&(CMP.Heat=a),void 0===CMP.HeatViewer&&(CMP.HeatViewer=a)},launchApp:function(){"undefined"==typeof Playable?CMP.Log(CMP.Log.ERROR,"Could not find Playable"):(CMP.Loader=this,CMP._playableInstance=new Playable)},requireLoad:function(a,b){return"function"==typeof b&&b(),!0},loadImage:function(a,b){var c=new Image;a.img=c;var d=this.onload.bind(this,"Image",a,b),e={config:a,loaded:!1,callback:d};c.onload=this.avoidTimeout.bind(this,e),setTimeout(this.loadTimeout.bind(this,e),15e3),c.src=ASSETS[a.src]},loadAudio:function(a,b){function c(a){a||(e=!1),0==--d&&(e?this.avoidTimeout(g):this.loadTimeout(g))}var d=0,e=!0,f=this.onload.bind(this,"Audio",a,b),g={config:a,loaded:!1,callback:f};setTimeout(this.loadTimeout.bind(this,g),3e4),a.loaded=!1,a.count=a.count?a.count:1,a.audioLoaders=[];for(var h=0;h<a.count;h++){new CMP.AudioManager({config:a,onComplete:c.bind(this,!0),onError:c.bind(this,!1)});d++}},loadVideo:function(a,b){function c(a){a||(e=!1),0==--d&&(e?this.avoidTimeout(g):this.loadTimeout(g))}var d=0,e=!0,f=this.onload.bind(this,"Video",a,b),g={config:a,loaded:!1,callback:f};setTimeout(this.loadTimeout.bind(this,g),3e4),a.loaded=!1,a.count=a.count?a.count:1,a.videoLoaders=[];for(var h=(CMP.getMobileOS(),1),i=0;i<a.count*h;i++){"Android"===CMP.getMobileOS()?new CMP.VideoAndroid({uniqueID:i,config:a,onComplete:c.bind(this,!0),onError:c.bind(this,!1)}):"iOS"===CMP.getMobileOS()?new CMP.VideoIOS({uniqueID:i,config:a,onComplete:c.bind(this,!0),onError:c.bind(this,!1)}):new CMP.VideoDesktop({uniqueID:i,config:a,onComplete:c.bind(this,!0),onError:c.bind(this,!1)});d++}},checkDuplicateFont:function(a){this.fontsLoaded||(this.fontsLoaded={});var b=a.fontFamily||a.id;return!!this.fontsLoaded[b]||(this.fontsLoaded[b]=!0,!1)},checkNecessaryFont:function(a){if("undefined"!=typeof SCENE_CONFIG){if(!this.fontsRequired){this.fontsRequired=[];for(var b in SCENE_CONFIG){var c=SCENE_CONFIG[b];for(var d in c.children){var e=c.children[d];this.getFontsInLayer(e)}}}if(-1===this.fontsRequired.indexOf(a.fontFamily))return!1}return!0},getFontsInLayer:function(a){if("Font"===a.type){var b=a.config.family;-1===this.fontsRequired.indexOf(b)&&this.fontsRequired.push(b)}if("GroupObject"===a.type)for(var c in a.children)this.getFontsInLayer(a.children[c])},loadFont:function(a,b){if(!this.checkNecessaryFont(a)||this.checkDuplicateFont(a))return void b();var c=this.onload.bind(this,"Font",a,b),d={config:a,loaded:!1,callback:c};setTimeout(this.loadTimeout.bind(this,d),3e4),a.loaded=!1;var e=new CMP.Font;if(e.fontFamily=a.fontFamily||a.id,a.font=e,e.onload=function(){this.timeFont=!1,this.fontTimer=0,c(),d.loaded=!0}.bind(this),e.onerror=function(){}.bind(this),"undefined"!=typeof CUST_ASSETS&&void 0!==CUST_ASSETS["assets/fonts/customizable/"+a.id+".ttf"]?e.src=FONT_SRCS["assets/fonts/customizable/"+a.id+".ttf"]:"undefined"!=typeof FONT_SRCS&&void 0!==FONT_SRCS[a.src]?e.src=FONT_SRCS[a.src]:e.src=a.src,"undefined"!=typeof InstallTrigger){var f=document.createElement("style");f.appendChild(document.createTextNode("                @font-face {                    font-family: "+e.fontFamily+";                    src: url('"+e.src+"')                }                ")),document.head.appendChild(f)}},avoidTimeout:function(a){a.config.loaded=!0,a.loaded||(a.loaded=!0,a.callback())},loadTimeout:function(a){a.loaded||(CMP.Log(CMP.Log.ERROR,"Failed to load in time",a.config),a.loaded=!0,a.callback())},onload:function(a,b,c){switch(a){case"Image":case"Audio":case"Font":case"Video":CMP.App.addAsset(a,b),c()}}}}();